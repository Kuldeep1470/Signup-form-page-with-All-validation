<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Apex REST Methods without Site</title>
</head>
<body>

<div>
    <h1>Call Apex REST Methods without Site</h1>
    
    <button onclick="callDoGet()">Call GET Method</button>
    
    <button onclick="callDoPatch()">Call PATCH Method</button>

    <pre id="output"></pre>
</div>

<script>
    const salesforceInstance = 'https://metadologie43-dev-ed.develop.my.salesforce.com';
    const accessToken = '00D2w00000RooHC!AQsAQCJ5dpn6GXukKkS5YLCrgC8V2P2ZiL99fNVRpevaYN7_KzO0INVJdGLSHAoojXNiLISeX7tW1qh1PJK.Yso0DefgGOzP';
    const apiEndpoint = `${salesforceInstance}/services/apexrest/myRestService/`;

    function callDoGet() {
        // Make the GET request with bearer token authentication
        fetch(apiEndpoint, {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${accessToken}`
            }
        })
        .then(response => response.text())
        .then(data => {
            displayOutput(data);
        })
        .catch(error => {
            displayOutput('Error occurred: ' + error.message);
        });
    }

    function callDoPatch() {
        const input = 'example';

        // Make the PATCH request with bearer token authentication
        fetch(apiEndpoint, {
            method: 'PATCH',
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ input: input })
        })
        .then(response => response.text())
        .then(data => {
            displayOutput(data);
        })
        .catch(error => {
            displayOutput('Error occurred: ' + error.message);
        });
    }

    function displayOutput(data) {
        document.getElementById('output').textContent = data;
    }
</script>

</body>
</html>
