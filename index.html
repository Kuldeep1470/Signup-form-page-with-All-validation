<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Apex REST Methods via Public Site v2</title>
</head>

<body>

    <div>
        <h1>Call Apex REST Methods via Public Site</h1>

        <button onclick="callDoGet()">Call GET Method</button>

        <button onclick="callDoPatch()">Call PATCH Method</button>

        <pre id="output"></pre>
    </div>

    <script>
        const siteUrl = 'https://metadologie43-dev-ed.develop.my.site.com';
        const apiUrl = `${siteUrl}/services/apexrest/myRestService/`;

        function callDoGet() {
            fetch(apiUrl, {
                method: 'GET'
            })
                .then(response => response.text())
                .then(data => {
                    displayOutput(data);
                })
                .catch(error => {
                    displayOutput('Error occurred: ' + error.message);
                });
        }

        function callDoPatch() {
            const input = 'example';

            fetch(apiUrl, {
                method: 'PATCH',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ input: input })
            })
                .then(response => response.text())
                .then(data => {
                    displayOutput(data);
                })
                .catch(error => {
                    displayOutput('Error occurred: ' + error.message);
                });
        }

        function displayOutput(data) {
            document.getElementById('output').textContent = data;
        }
    </script>

</body>

</html>
